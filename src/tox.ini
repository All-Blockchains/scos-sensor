[tox]
envlist = py36 py37
skip_missing_interpreters = True
skipsdist = True

[testenv]
deps =
    -r{toxinidir}/requirements-dev.txt
commands = py.test {posargs}
install_command = pip install {opts} {packages}
list_dependencies_command = pip freeze

[testenv:coverage]
basepython = python3
deps =
    -r{toxinidir}/requirements-dev.txt
commands = py.test --cov-report term-missing --no-cov-on-fail --cov

[testenv:update-api-docs]
basepython = python3
deps =
    -r{toxinidir}/requirements-dev.txt
commands = py.test -m update_api_docs --update-api-docs

[pytest]
DJANGO_SETTINGS_MODULE = sensor.settings

[flake8]
max-line-length = 80
max-complexity = 12
select = C,E,F,W,B,B950
ignore = E501

[isort]
multi_line_output=3
include_trailing_comma=True
force_grid_wrap=0
use_parentheses=True
line_length=88

[coverage:run]
omit =
    .tox/*
    */tests/*
    */migrations/*
    sensor/settings.py
