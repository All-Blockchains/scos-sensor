[tox]
envlist = py{27,34,35,36,37}
skip_missing_interpreters = True
skipsdist = True

[testenv]
deps =
     pytest
     pytest-django
     -r{toxinidir}/requirements.txt
passenv = SCOS_SENSOR_PRESELECTOR_IP
          SCOS_SENSOR__RADIO_ID
commands = py.test {posargs}
install_command = pip install {opts} {packages}
list_dependencies_command = pip freeze

[testenv:lint]
basepython = python3
deps =
    pygments
    docutils
    restructuredtext-lint
    flake8
commands =
    python3 -m flake8 .
    rst-lint README.rst

[testenv:coverage]
basepython = python3
deps = pytest-cov
commands = py.test --cov-report term-missing --cov=src tests

[flake8]
exclude = .tox,*.egg,build,__init__.py,tests,docs,src/sigmf

[pytest]
DJANGO_SETTINGS_MODULE = sensor.settings
